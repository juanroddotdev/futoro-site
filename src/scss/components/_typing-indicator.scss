@import '../abstracts/variables';

.typing-indicator {
  max-width: 80%;
  position: relative;
  margin-right: auto;
  
  &.sent {
    margin-left: auto;
    margin-right: 0;
    display: flex;
    justify-content: end;
  }
  
  .typing-animation {
    padding: 8px 12px;
    border-radius: 16px;
    background: #e5e5ea;
    display: flex;
    align-items: center;
    gap: 4px;
    width: 40px;
    
    span {
      width: 4px;
      height: 4px;
      background: #8e8e93;
      border-radius: 50%;
      animation: typing 0.6s infinite;
      display: inline-block;
      
      &:nth-child(2) {
        animation-delay: 0.1s;
      }
      
      &:nth-child(3) {
        animation-delay: 0.2s;
      }
    }
  }
  
  &.sent .typing-animation {
    background: #007AFF;
    
    span {
      background: rgba(255, 255, 255, 0.7);
    }
  }
}

@keyframes typing {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-3px);
  }
}

// Theme-specific styling
@each $theme-name, $theme-map in $themes {
  .theme-#{$theme-name} .typing-indicator {
    .typing-animation {
      background: if($theme-name == 'pastel-future', 
                    #e5e5ea, 
                    rgba(map-get($theme-map, 'background'), 0.8));
      
      span {
        background: if($theme-name == 'pastel-future', 
                     #8e8e93, 
                     rgba(map-get($theme-map, 'neutral'), 0.7));
      }
    }
    
    &.sent .typing-animation {
      background: map-get($theme-map, 'accent');
      
      span {
        background: rgba(255, 255, 255, 0.7);
      }
    }
  }
}
